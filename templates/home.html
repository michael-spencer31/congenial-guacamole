<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="icon" href="/static/images/logos/AUS.png">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0"/>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/static/css/template.css">
    <script src="/static/js/script.js"></script>
    <title>Home</title>
    <script>
        async function fetchData() {
            try {
                // Fetch data from the Flask API
                const response = await fetch('/standings_data');
                
                // Check if the response is OK (status code 200)
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                // Parse JSON data
                const data = await response.json();
                
                // Skip the first row (headers) and get the rest of the data
                const tableData = data.slice(1);
                
                // Populate the table
                const table = document.getElementById('data-table');
                
                // Create table headers
                const headers = ['Team', 'GP', 'W', 'L', 'OTL', 'SOL', 'Last 10', 'Streak', 'GF', 'GA', 'G Diff', 'PTS', 'Pt %']; // First row of data as headers
                let thead = '<tr>';
                headers.forEach(header => thead += `<th>${header}</th>`);
                thead += '</tr>';
                
                // Create table rows
                let tbody = '<tbody>';
                tableData.forEach(row => {
                    tbody += '<tr>';
                    row.forEach(cell => tbody += `<td>${cell}</td>`);
                    tbody += '</tr>';
                });
                tbody += '</tbody>';
                
                // Insert headers and rows into the table
                table.innerHTML = thead + tbody;
                
            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
            }
        }

        // Fetch data when the page loads
        window.onload = fetchData;
    </script>
  </head>
  <body>
    {% extends "template.html" %}
    {% block content %}
                
        <div class="container">
            <div class="panel panel-default">
                <table id="data-table"></table>
            </div>
        </div>

        
        
    {% endblock %}

    
  </body>
</html>